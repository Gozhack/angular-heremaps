/**
 * Angular HERE Maps - AngularJS Provider for working with the HERE Maps API
 * @version v1.0.0 - 2014-02-17
 * @link http://www.eyecatch.no/
 * @author Ove Andersen <ove.andersen@outlook.com>
 * @license Apache License, Version 2.0, http://opensource.org/licenses/Apache-2.0)
 */
!function(a,b){"use strict";b.module("eyecatch.heremaps",[]),b.module("eyecatch.heremaps").provider("heremaps",function(){this._initialized=!1,this._loaded=!1,this.settings={appId:"",appCode:"",secureConnection:!0,testMode:!0},this.$get=function(b,c){var d=this;if(!d._initialized){var e=a.createElement("script");e.type="text/javascript",e.src="https://js.api.here.com/se/2.5.3/jsl.js?blank=true",a.getElementsByTagName("head")[0].appendChild(e),e.onload=function(){nokia.Features.load(nokia.Features.getFeaturesFromMatrix(["all"]),function(){c.info("HERE maps API loaded"),d._loaded=!0,d.appId(d.settings.appId),d.appCode(d.settings.appCode),d.secureConnection(d.settings.secureConnection),d.testMode(d.settings.testMode),b.$broadcast("heremaps-loaded")},function(a){c.error("HERE maps API failed to load. "+a),b.$broadcast("heremaps-error",a)},null,!1),b.$broadcast("heremaps-initialized")},d._initialized=!0}return d},this.appId=function(a){return a&&(this.settings.appId=a,this._loaded&&nokia.Settings.set("app_id",this.settings.appId)),this.settings.appId},this.appCode=function(a){return a&&(this.settings.appCode=a,this._loaded&&nokia.Settings.set("app_code",this.settings.appCode)),this.settings.appCode},this.secureConnection=function(a){return a===Boolean&&(this.settings.secureConnection=a,a===!0&&this._loaded&&nokia.Settings.set("secureConnection","force")),this.settings.secureConnection},this.testMode=function(a){return a===Boolean&&(this.defaultSettings.testMode=a,a===!0&&this._loaded&&nokia.Settings.set("serviceMode","cit")),this.settings.testMode}})}(document,window.angular);